From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: chickeneer <emcchickeneer@gmail.com>
Date: Fri, 1 Jul 2022 20:15:55 -0500
Subject: [PATCH] Sheep should not regrow wool if grass eating is cancelled


diff --git a/src/main/java/net/minecraft/world/entity/ai/goal/EatBlockGoal.java b/src/main/java/net/minecraft/world/entity/ai/goal/EatBlockGoal.java
index 9c2c2b3557f4a70c6c965f159a57682e1827d1ad..25814ef0b8300425e3fbe9b1be733d299cafd710 100644
--- a/src/main/java/net/minecraft/world/entity/ai/goal/EatBlockGoal.java
+++ b/src/main/java/net/minecraft/world/entity/ai/goal/EatBlockGoal.java
@@ -77,9 +77,10 @@ public class EatBlockGoal extends Goal {
                 // CraftBukkit
                 if (!CraftEventFactory.callEntityChangeBlockEvent(this.mob, blockposition, Blocks.AIR.defaultBlockState(), !this.level.getGameRules().getBoolean(GameRules.RULE_MOBGRIEFING)).isCancelled()) {
                     this.level.destroyBlock(blockposition, false);
+                    this.mob.ate(); // EMC - moved from below
                 }
 
-                this.mob.ate();
+                //this.mob.ate(); // EMC - move up
             } else {
                 BlockPos blockposition1 = blockposition.below();
 
@@ -88,9 +89,10 @@ public class EatBlockGoal extends Goal {
                     if (!CraftEventFactory.callEntityChangeBlockEvent(this.mob, blockposition1, Blocks.DIRT.defaultBlockState(), !this.level.getGameRules().getBoolean(GameRules.RULE_MOBGRIEFING)).isCancelled()) { // Paper - Fix wrong block state
                         this.level.levelEvent(2001, blockposition1, Block.getId(Blocks.GRASS_BLOCK.defaultBlockState()));
                         this.level.setBlock(blockposition1, Blocks.DIRT.defaultBlockState(), 2);
+                        this.mob.ate(); // EMC - moved from below
                     }
 
-                    this.mob.ate();
+                    //this.mob.ate(); // EMC - move up
                 }
             }
 
